<UserControl
  x:Class="MusicPlayer.MyBalloonTip"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="me"
    Opacity="0"
  xmlns:tb="http://www.hardcodet.net/taskbar">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="bool2vis"/>
        <Style TargetType="TextBlock" x:Key="label_base">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="TextTrimming" Value="WordEllipsis" />
        </Style>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation  Storyboard.TargetName="me" Storyboard.TargetProperty="Opacity" EasingFunction="{DynamicResource easeFunc}" 
                              To="1" 
                              Duration="0:0:0.2"/>
        </Storyboard>
        <Storyboard x:Key="FadeBack">
            <DoubleAnimation  Storyboard.TargetName="me" Storyboard.TargetProperty="Opacity" EasingFunction="{DynamicResource easeFunc}" 
                              To="1" 
                              Duration="0:0:0.2"/>
        </Storyboard>
        <Storyboard x:Key="FadeOut" Completed="OnFadeOutCompleted" >
            <DoubleAnimation  Storyboard.TargetName="me" Storyboard.TargetProperty="Opacity" EasingFunction="{DynamicResource easeFunc}" 
                              To="0" 
                              Duration="0:0:0.2"/>
        </Storyboard>
    </UserControl.Resources>
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="tb:TaskbarIcon.BalloonShowing">
            <BeginStoryboard Storyboard="{StaticResource FadeIn}" x:Name="FadeIn_BeginStoryboard"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="Mouse.MouseEnter">
            <StopStoryboard BeginStoryboardName="FadeIn_BeginStoryboard"/>
            <BeginStoryboard x:Name="FadeBack_BeginStoryboard1" Storyboard="{StaticResource FadeBack}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="tb:TaskbarIcon.BalloonClosing">
            <BeginStoryboard Storyboard="{StaticResource FadeOut}" x:Name="FadeOut_BeginStoryboard"/>
        </EventTrigger>
    </UserControl.Triggers>
    <Grid x:Name="grid" Background="{Binding LogoColor}">
        <Grid Width="220" Height="70" Margin="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Image IsHitTestVisible="False" Width="60" Height="60"  
                        Source="{Binding ImageSource}"
                        Stretch="Uniform" VerticalAlignment="Top"/>
            <StackPanel IsHitTestVisible="False" Grid.Column="1" VerticalAlignment="Top" Margin="10,0">
                <TextBlock Text="{Binding Name}" FontSize="18"  Style="{DynamicResource label_base}"/>
                <TextBlock Style="{DynamicResource label_base}"   Text="{Binding ArtistName}" />
                <TextBlock Style="{DynamicResource label_base}"   Text="{Binding AlbumName}" />
            </StackPanel>
        </Grid>
        <TextBlock x:Name="btn_close" Visibility="Hidden" MouseLeftButtonUp="imgClose_MouseDown" Text="&#xE10a;" FontFamily="Segoe UI Symbol" Foreground="White" FontSize="16" Margin="0,5,5,0"
                   VerticalAlignment="Top"
                   HorizontalAlignment="Right"/>
    </Grid>
</UserControl>